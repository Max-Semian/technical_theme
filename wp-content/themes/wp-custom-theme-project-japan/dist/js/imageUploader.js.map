{"version":3,"file":"js/imageUploader.js","mappings":"AAEAA,OAAOC,UAAUC,OAAM,SAAUC,GAChC,cAIA,SAASC,oBAAoBC,GAG5B,IAAIC,GAAc,EAGZC,EAAqBC,GAAGC,MAAMC,OAAOC,KAAKC,WAEhDT,EAAE,QAAQU,GAAG,QAASR,GAAc,WAEnC,IAAMS,EAAW,IAAMX,EAAEY,MAAMC,KAAK,MAC9BC,EAASd,EAAEW,GAyBjB,OAxBAR,GAAc,EAIdE,GAAGC,MAAMC,OAAOC,KAAKC,WAAa,SAAUM,EAAON,GAGlD,IAAIN,EASH,OAAOC,EAAmBY,MAAML,EAAU,CAACI,EAAON,IARlDT,EAAE,sBAAsBiB,IAAIR,EAAWS,IACvClB,EAAE,2BAA2BmB,KAC5B,2GAEDnB,EAAE,+CACAa,KAAK,MAAOJ,EAAWW,KACvBC,IAAI,UAAW,QAInB,EAIAhB,GAAGC,MAAMC,OAAOe,KAAKR,IAEd,CACR,GACD,CAEAb,CAAoB,+BAEpBD,EAAE,QAAQU,GAAG,QAAS,wBAAwB,WAE7CV,EAAE,sBAAsBiB,IAAI,IAC5BjB,EAAE,2BAA2BmB,KAC5B,0GAEF,IAIAnB,EAAEF,UAAUyB,cAAa,SAAUC,EAAOC,EAAKC,GAG9C,IACMC,EAAiBD,EAASE,KAAKC,MAAM,KAE3C,IAAqD,IAAjD7B,EAAE8B,QAAQ,iBAAkBH,GAAwB,CACvD,IAAMI,EAAMN,EAAIO,YAGA,IAFLhC,EAAE+B,GAAKE,KAAK,WAAWC,QAGjClC,EAAE,2BAA2BmB,KAAK,GAEpC,CACD,IAKAnB,EAAE,QAAQU,GAAG,QAAS,yBAAyB,SAAUyB,GAGxDA,EAAEC,iBAEF,IAAMtB,EAASd,EAAEY,MAIXyB,EAAiBhC,GACrBC,MAAM,CACNgC,MAAO,eACPC,QAAS,CACRC,KAAM,SAEP1B,OAAQ,CACPoB,KAAM,aAEPO,UAAU,IAEV/B,GAAG,UAAU,WAGb,IAAMD,EAAa4B,EAAeK,QAAQC,IAAI,aAAaC,QAAQC,SAEnE7C,EAAEc,GACAgC,YAAY,UACZ3B,KACA,wCACCV,EAAWW,IACX,6DAED2B,OACA9B,IAAIR,EAAWS,IACf6B,OACAC,MACH,IACC1B,MACH,IAEAtB,EAAE,QAAQU,GAAG,QAAS,yBAAyB,WAK9C,OAFAV,EAAEY,MAAMqC,OAAOC,OAAOjC,IAAI,IAAIiC,OAAOC,SAAS,UAAUhC,KAAK,iBAEtD,CACR,GAGD","sources":["webpack://custom-organization-theme/./src/scripts/image-uploader.ts"],"sourcesContent":["// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\njQuery(document).ready(function ($) {\n\t\"use strict\";\n\n\t// Upload Taxonomy Image Start\n\n\tfunction custom_image_upload(button_class: string) {\n\t\t\"use strict\";\n\n\t\tlet customMedia = true;\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tconst origSendAttachment = wp.media.editor.send.attachment;\n\n\t\t$(\"body\").on(\"click\", button_class, function () {\n\t\t\t\"use strict\";\n\t\t\tconst buttonId = \"#\" + $(this).attr(\"id\");\n\t\t\tconst button = $(buttonId);\n\t\t\tcustomMedia = true;\n\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t// @ts-ignore\n\t\t\twp.media.editor.send.attachment = function (props, attachment) {\n\t\t\t\t\"use strict\";\n\n\t\t\t\tif (customMedia) {\n\t\t\t\t\t$(\"#taxonomy-image-id\").val(attachment.id);\n\t\t\t\t\t$(\"#taxonomy-image-wrapper\").html(\n\t\t\t\t\t\t'<img class=\"custom_media_image\" src=\"\" style=\"margin: 0; padding: 0; max-height: 32px; float: none;\" />'\n\t\t\t\t\t);\n\t\t\t\t\t$(\"#taxonomy-image-wrapper .custom_media_image\")\n\t\t\t\t\t\t.attr(\"src\", attachment.url)\n\t\t\t\t\t\t.css(\"display\", \"block\");\n\t\t\t\t} else {\n\t\t\t\t\treturn origSendAttachment.apply(buttonId, [props, attachment]);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t\t// @ts-ignore\n\t\t\twp.media.editor.open(button);\n\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tcustom_image_upload(\".custom_media_button.button\");\n\n\t$(\"body\").on(\"click\", \".custom_media_remove\", function () {\n\t\t\"use strict\";\n\t\t$(\"#taxonomy-image-id\").val(\"\");\n\t\t$(\"#taxonomy-image-wrapper\").html(\n\t\t\t'<img class=\"custom_media_image\" src=\"\" style=\"margin: 0; padding: 0; max-height: 32px; float: none;\" />'\n\t\t);\n\t});\n\n\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t// @ts-ignore\n\t$(document).ajaxComplete(function (event, xhr, settings) {\n\t\t\"use strict\";\n\n\t\tlet response;\n\t\tconst queryStringArr = settings.data.split(\"&\");\n\n\t\tif ($.inArray(\"action=add-tag\", queryStringArr) !== -1) {\n\t\t\tconst xml = xhr.responseXML;\n\t\t\tresponse = $(xml).find(\"term_id\").text();\n\n\t\t\tif (response != \"\") {\n\t\t\t\t$(\"#taxonomy-image-wrapper\").html(\"\");\n\t\t\t}\n\t\t}\n\t});\n\n\t// Upload Taxonomy Image End\n\n\t// Upload image - Start\n\t$(\"body\").on(\"click\", \".custom_upload_button\", function (e: { preventDefault: () => void }) {\n\t\t\"use strict\";\n\n\t\te.preventDefault();\n\n\t\tconst button = $(this);\n\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n\t\t// @ts-ignore\n\t\tconst customUploader = wp\n\t\t\t.media({\n\t\t\t\ttitle: \"Insert image\",\n\t\t\t\tlibrary: {\n\t\t\t\t\ttype: \"image\",\n\t\t\t\t},\n\t\t\t\tbutton: {\n\t\t\t\t\ttext: \"Set image\",\n\t\t\t\t},\n\t\t\t\tmultiple: false,\n\t\t\t})\n\t\t\t.on(\"select\", function () {\n\t\t\t\t\"use strict\";\n\n\t\t\t\tconst attachment = customUploader.state().get(\"selection\").first().toJSON();\n\n\t\t\t\t$(button)\n\t\t\t\t\t.removeClass(\"button\")\n\t\t\t\t\t.html(\n\t\t\t\t\t\t'<img class=\"custom-admin-image\" src=\"' +\n\t\t\t\t\t\t\tattachment.url +\n\t\t\t\t\t\t\t'\" style=\"max-width: 100%; width: auto; display:block;\" />'\n\t\t\t\t\t)\n\t\t\t\t\t.next()\n\t\t\t\t\t.val(attachment.id)\n\t\t\t\t\t.next()\n\t\t\t\t\t.show();\n\t\t\t})\n\t\t\t.open();\n\t});\n\n\t$(\"body\").on(\"click\", \".custom_remove_button\", function () {\n\t\t\"use strict\";\n\n\t\t$(this).hide().prev().val(\"\").prev().addClass(\"button\").html(\"Upload image\");\n\n\t\treturn false;\n\t});\n\n\t// Upload image - End\n});\n"],"names":["jQuery","document","ready","$","custom_image_upload","button_class","customMedia","origSendAttachment","wp","media","editor","send","attachment","on","buttonId","this","attr","button","props","apply","val","id","html","url","css","open","ajaxComplete","event","xhr","settings","queryStringArr","data","split","inArray","xml","responseXML","find","text","e","preventDefault","customUploader","title","library","type","multiple","state","get","first","toJSON","removeClass","next","show","hide","prev","addClass"],"sourceRoot":""}